{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nconst API_URL = 'https://pixabay.com/api/?';\nconst API_KEY = '46105893-c3619f828e66c5e4a4f6c6159';\n\nexport function getGalleryData(queryValue) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,           \n    q: queryValue,      \n    image_type: 'photo',    \n    orientation: 'horizontal', \n    safesearch: true,       \n  });\n\n  return fetch(`${API_URL}${searchParams}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n        return response.json();\n    })\n    .catch(error=>{console.error(error)})\n}","export function addLoader(gallery) {\n  const loaderHTML = '<span class=\"loader\"></span>';\n  gallery.insertAdjacentHTML('beforebegin', loaderHTML);\n}\n\nexport function removeLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\nexport function markup(data) {\n  return data.hits\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <li class=\"gallery-item \">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                  class=\"gallery-image\"\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n              /></a>\n              <ul class=\"img-wrapper\">\n                <li class=\"img-descr\">Likes<span>${likes}</span></li>\n                <li class=\"img-descr\">Views<span>${views}</span></li>\n                <li class=\"img-descr\">Comments<span>${comments}</span></li>\n                <li class=\"img-descr\">Downloads<span>${downloads}</span></li>\n              </ul>\n            </li>\n      `\n    )\n    .join('');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nimport { getGalleryData } from './js/pixabay-api';\nimport { addLoader, removeLoader, markup } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt', \n  captionDelay: 250,  \n});\n\nform.addEventListener('submit', onSubmitForm);\n\nfunction onSubmitForm(event) {\n  event.preventDefault();\n\n  const formData = new FormData(event.target);\n  const { search } = Object.fromEntries(formData.entries());\n  const searchValue = search.trim();\n\n  if (!searchValue) {\n    iziToast.error({\n      title: 'Error',\n      message: 'The search query is empty.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  addLoader(gallery);\n\n  getGalleryData(searchValue)\n    .then(data => {\n      gallery.innerHTML = '';\n      if (data.hits.length === 0) {\n        iziToast.info({\n          position: 'topRight',\n          title: 'Info',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n      }\n\n      const galleryMarkup = markup(data);\n      gallery.insertAdjacentHTML('beforeend', galleryMarkup)\n      lightbox.refresh();\n    })\n    .catch(error => {\n      console.error('Error:', error);\n      iziToast.error({\n        title: 'Error',\n        message: `Error: ${error.message}`,\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      removeLoader();\n    });\n}"],"names":["API_URL","API_KEY","getGalleryData","queryValue","searchParams","response","error","addLoader","gallery","removeLoader","loader","markup","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","lightbox","SimpleLightbox","onSubmitForm","event","formData","search","searchValue","iziToast","galleryMarkup"],"mappings":"6vBACA,MAAMA,EAAU,4BACVC,EAAU,qCAET,SAASC,EAAeC,EAAY,CACzC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,GAAGH,CAAO,GAAGI,CAAY,EAAE,EACrC,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAE/B,OAAOA,EAAS,MACxB,CAAK,EACA,MAAMC,GAAO,CAAC,QAAQ,MAAMA,CAAK,CAAC,CAAC,CACxC,CCrBO,SAASC,EAAUC,EAAS,CAEjCA,EAAQ,mBAAmB,cADR,8BACiC,CACtD,CAEO,SAASC,GAAe,CAC7B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,CAEO,SAASC,EAAOC,EAAM,CAC3B,OAAOA,EAAK,KACT,IACC,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,8CAEtCL,CAAa;AAAA;AAAA;AAAA,yBAGlCD,CAAY;AAAA,yBACZE,CAAI;AAAA;AAAA;AAAA,mDAGsBC,CAAK;AAAA,mDACLC,CAAK;AAAA,sDACFC,CAAQ;AAAA,uDACPC,CAAS;AAAA;AAAA;AAAA,OAI3D,EACA,KAAK,EAAE,CACZ,CCvBA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CZ,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIa,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAEDF,EAAK,iBAAiB,SAAUG,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAW,IAAI,SAASD,EAAM,MAAM,EACpC,CAAE,OAAAE,CAAM,EAAK,OAAO,YAAYD,EAAS,QAAO,CAAE,EAClDE,EAAcD,EAAO,OAE3B,GAAI,CAACC,EAAa,CAChBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDrB,EAAUC,CAAO,EAEjBN,EAAeyB,CAAW,EACvB,KAAKf,GAAQ,CAEZ,GADAJ,EAAQ,UAAY,GAChBI,EAAK,KAAK,SAAW,EAAG,CAC1BgB,EAAS,KAAK,CACZ,SAAU,WACV,MAAO,OACP,QAAS,0EACnB,CAAS,EACD,MACD,CAED,MAAMC,EAAgBlB,EAAOC,CAAI,EACjCJ,EAAQ,mBAAmB,YAAaqB,CAAa,EACrDR,EAAS,QAAO,CACtB,CAAK,EACA,MAAMf,GAAS,CACd,QAAQ,MAAM,SAAUA,CAAK,EAC7BsB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,UAAUtB,EAAM,OAAO,GAChC,SAAU,UAClB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbG,GACN,CAAK,CACL"}